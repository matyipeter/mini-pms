{% extends "users/base.html" %}

{% block content %}
<div class="container mx-auto mt-10">
    <!-- Dashboard Header -->
    <div class="text-center mb-8">
        <h1 class="text-3xl font-bold text-indigo-700">Welcome to Your Dashboard, {{ owner.user.username }}</h1>
        <p class="text-lg text-gray-600 mt-2">Here's an overview of your properties and management tools.</p>
    </div>

    <!-- Property Summary -->
    <div class="bg-white shadow-sm rounded-lg p-6 mb-6">
        <div class="flex justify-between items-center">
            <div>
                <h2 class="text-xl font-semibold text-gray-800">Your Properties</h2>
                <p class="text-gray-600">{{ property_count }} properties in total</p>
            </div>
            <div class="flex gap-3">
                <a href="{% url 'properties:add_property' %}" class="inline-block bg-indigo-600 text-white py-2 px-4 rounded hover:bg-indigo-500">Add New Property</a>
                <form method="post" action="{% url 'reports:report_create' %}">
                    {% csrf_token %}
                    <button type="submit" class="inline-block bg-green-600 text-white py-2 px-4 rounded hover:bg-green-500">
                        Create Report
                    </button>
                </form>
            </div>
        </div>

        <div class="mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for property in properties %}
                <div class="border rounded-lg p-4 shadow-md bg-gray-50">
                    <h3 class="text-lg font-bold">{{ property.address }}</h3>
                    <p class="text-gray-600">Added on: {{ property.created_at|date:"F j, Y" }}</p>
                    <p class="text-gray-500">{{ property.occupancy_status }}</p>
                    <a href="{% url 'properties:property_detail' property.id %}" class="text-indigo-600 hover:text-indigo-500">View Details</a>
                    <div class="mt-2">
                        <a href="{% url 'properties:update_property' property.id %}" class="text-indigo-600 hover:text-indigo-500 text-sm">Edit</a>
                        <span class="mx-2">|</span>
                        <a href="{% url 'properties:delete_property' property.id %}" class="text-red-600 hover:text-red-500 text-sm">Delete</a>
                    </div>
                </div>
            {% empty %}
                <p class="text-gray-600">You have no properties added yet.</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}